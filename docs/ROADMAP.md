# QuestyBook 로드맵

> 논의된 기능 및 개선사항 중 미구현 항목 정리
>
> 최종 업데이트: 2025-01-05

---

## 1. 데이터 소스 확장

### 1.1 EBSi 연동
- **현황**: EBSi에서 수능특강/수능완성 PDF 무료 제공
- **다운로드 방식**: EBSi 회원가입 → 강의 수강신청 → 교재 PDF 다운로드
- **제한사항**: 전용 뷰어(EBSi PDF Reader) 필요, ebsp 포맷
- **구현 방안**:
  - [ ] EBSi API 존재 여부 조사
  - [ ] ebsp 포맷 파싱 가능성 검토
  - [ ] EBS 교재 목차 자동 추출

### 1.2 마더텅 학습계획표 활용
- **현황**: [마더텅 교재자료실](https://www.toptutor.co.kr/pds/index.jsp?type=04)에서 학습계획표 PDF 무료 제공
- **장점**: 공식 학습계획표 → AI 분석 없이 일정 생성 가능
- **구현 방안**:
  - [ ] 마더텅 학습계획표 PDF 다운로드 자동화
  - [ ] PDF 파싱하여 일정 데이터 추출
  - [ ] 교재 선택 시 공식 학습계획표 자동 적용 옵션

### 1.3 출판사 직접 제휴
- **대상**: 마더텅, EBS, 메가스터디북스, 좋은책신사고 등
- **목적**: 공식 API 또는 데이터 제공 협력
- **구현 방안**:
  - [ ] 출판사별 담당자 연락처 조사
  - [ ] 제휴 제안서 작성
  - [ ] 파일럿 협력 진행

---

## 2. 스케일링 대비

### 2.1 Yes24 스크래핑 안정화
- **현재 리스크**:
  - IP 차단 가능성
  - Rate Limiting
  - HTML 구조 변경 시 깨짐
  - 이용약관 위반 가능성

- **구현 방안**:
  - [ ] Redis 캐싱 레이어 추가
    - 검색 결과: 24시간 캐싱
    - 책 상세정보: 7일 캐싱
  - [ ] Rate Limiting 구현
    - 분당 요청 수 제한 (예: 10회/분)
    - 사용자별 검색 횟수 제한
  - [ ] 프록시 로테이션 (선택적)

### 2.2 자체 교재 DB 구축
- **목적**: Yes24 의존도 감소, 안정적 서비스
- **대상**: 수능 인기 교재 500~1,000권
- **구현 방안**:
  - [ ] 교재 DB 스키마 설계
  - [ ] 관리자 교재 등록 페이지
  - [ ] 사용자 교재 기여 기능 (승인 시스템)

### 2.3 ISBN 기반 공개 API 활용
- **대안 API 목록**:
  | API | 장점 | 단점 |
  |-----|------|------|
  | [국립중앙도서관 API](https://www.nl.go.kr/NL/contents/N31101030000.do) | 무료, 한국 도서 | 미리보기 없음 |
  | [네이버 책 검색 API](https://developers.naver.com/docs/search/book/) | 무료, 간편 | 미리보기 없음 |
  | [카카오 책 검색 API](https://developers.kakao.com/docs/latest/ko/daum-search/dev-guide#search-book) | 무료, 간편 | 미리보기 없음 |
  | [Google Books API](https://developers.google.com/books) | 미리보기 있음 | 한국 수능교재 적음 |

- **구현 방안**:
  - [ ] 여러 API 통합 검색 레이어 구현
  - [ ] 메타데이터 병합 로직

---

## 3. 기능 개선

### 3.1 재생성 시 교재 메타데이터 전달
- **현황**: 최초 생성 시에만 `bookMetadata` 전달됨
- **문제**: `/api/generate/regenerate` 엔드포인트에서 메타데이터 미사용
- **구현 방안**:
  - [ ] `regenerate` 함수에 `bookMetadata` 파라미터 추가
  - [ ] 프론트엔드에서 재생성 시 메타데이터 함께 전달
  - [ ] AI 프롬프트에 메타데이터 반영

### 3.2 강사 정보 데이터 강화
- **목적**: 교재별 추천 강사, 커리큘럼 정보 제공
- **데이터 소스**:
  - 오르비 (Orbi) - 강사 언급 빈도, 평가
  - 수만휘 - 학습 계획 추천
- **주요 강사 정보** (조사 결과):
  | 과목 | 강사 | 특징 |
  |------|------|------|
  | 국어 | 김동욱 | 직관적 해석, 기본기 좋은 학생용 |
  | 국어 | 강민철 | 구조적 독해, 단계별 학습 |
  | 수학 | 현우진 | 메가스터디 1위, 검증된 커리큘럼 |
  | 수학 | 정승제 | 이투스 대표, 기초~심화 |
  | 영어 | 설승환 | 다담 시리즈 |

- **구현 방안**:
  - [ ] 강사 정보 DB 스키마 설계
  - [ ] 교재-강사 매핑 테이블
  - [ ] 플랜 생성 시 추천 강사 표시

---

## 4. 인프라 개선

### 4.1 캐싱 레이어
```
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│   Frontend  │ ──▶ │   Backend   │ ──▶ │    Redis    │
└─────────────┘     └─────────────┘     └─────────────┘
                           │                   │
                           ▼                   ▼
                    ┌─────────────┐     캐시 히트 시
                    │   Yes24     │     Yes24 요청 스킵
                    └─────────────┘
```

- **구현 방안**:
  - [ ] Redis 또는 Upstash Redis 도입
  - [ ] 캐싱 미들웨어 구현
  - [ ] 캐시 무효화 전략 수립

### 4.2 API 비용 모니터링
- **현황**: 콘솔 로그로만 비용 추적
- **구현 방안**:
  - [ ] 일별/월별 API 사용량 대시보드
  - [ ] 비용 임계치 알림
  - [ ] 사용자별 사용량 추적

---

## 5. 우선순위 및 단계별 계획

### Phase 1: MVP 안정화 (현재)
- [x] 교재 메타데이터 연동
- [x] 동적 학습시간 추정
- [x] Yes24 자동분석 제거 (사용자 선택 방식)
- [x] AI 모델 통일 (Gemini 3 Flash)

### Phase 2: 스케일 준비 (사용자 100~1,000명)
- [ ] Redis 캐싱 레이어
- [ ] Rate Limiting
- [ ] 재생성 시 메타데이터 전달

### Phase 3: 데이터 독립 (사용자 1,000~10,000명)
- [ ] 마더텅 학습계획표 연동
- [ ] 자체 교재 DB 구축
- [ ] 공개 API 통합 검색

### Phase 4: 파트너십 (사용자 10,000명+)
- [ ] EBSi 연동
- [ ] 출판사 제휴
- [ ] 강사 정보 DB

---

## 참고 자료

### 공식 API 문서
- [EBSi](https://www.ebsi.co.kr)
- [마더텅 교재자료실](https://www.toptutor.co.kr/pds/index.jsp?type=04)
- [Google Books API](https://developers.google.com/books)
- [네이버 책 검색 API](https://developers.naver.com/docs/search/book/)

### 커뮤니티
- [오르비](https://orbi.kr) - 강사 평가, 커리큘럼 정보
- [수만휘](https://sumanwhi.com) - 학습 계획 공유
